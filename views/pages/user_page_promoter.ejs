<% if (type === "listener") { %>
  <%- include('../partials/listener_navbar') %>
<% } else if (type === "promoter") { %>
  <%- include('../partials/promoter_navbar') %>
<% } %>

<br>
<br>
<br>
<br>
<br>

<h1>Welcome <%= promoter.company_name %></h1>
<p>Email: <%= promoter.email %></p>

<img id="upload-img" width="200" height="200" src="/<%= promoter.picture %>">
<% if (type === 'promoter' && promoter.id === user.id) { %>
<p><a href="/user/promoter/<%= promoter.id %>/upload" id="upload" >Change profile picture</a></p>
<% } %>

<% if (type === 'listener') { %>
  <% if (followed === 'true') { %>
    <form method="POST" action="/user/unfollow">
      <input type="hidden" name="promoter_id" value="<%= promoter.id %>">
      <input type="hidden" name="position" value="<%= position %>">
      <button type="submit">Unfollow</button>
    </form>
  <% } else { %>
    <form method="POST" action="/user/follow">
      <input type="hidden" name="promoter_id" value="<%= promoter.id %>">
      <button type="submit">Follow</button>
    </form>
  <% } %>
<% } %>

<h2>Upcoming Events:</h2>
<% if (events.length > 0) { %>
  <ul>
    <% events.forEach(event => { %>
        <li>
          <h3><%= event.name %></h3>
          <p><%= event.date.toLocaleDateString() %></p>
          <p>Location: <%= event.location %></p>
          <p>Price: Â£<%= event.price %></p>
          <p>Genre: <%= event.genre %></p>
          <% if (type === 'promoter') { %>
            <form method="POST" action="/user/promoter/event/<%=event.id%>">
              <button type="submit">Delete</button>
            </form>
            <form method="GET" action="/user/promoter/event/update/<%=event.id%>">
              <button type="submit">Update</button>
            </form>
          <% } %>
        </li>
      <% }); %>
  </ul>
<% } else { %>
  <p>No upcoming events.</p>
<% } %>

</div>
